{"version":3,"sources":["../src/react/MinecraftAvatar.tsx","../src/shared/constants.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, memo, useCallback } from 'react';\nimport type { MinecraftAvatarProps } from '../shared/types';\nimport { STEVE_UUID } from '../shared/constants';\n\nconst MinecraftAvatarComponent = ({\n  uuid,\n  mcid,\n  size = 64,\n  className = '',\n  priority = false,\n  apiEndpoint = '/api/avatar',\n}: MinecraftAvatarProps) => {\n  const [imgError, setImgError] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Construct API URL\n  const imageUrl = `${apiEndpoint}?uuid=${uuid}&size=${size}`;\n  const fallbackUrl = `${apiEndpoint}?uuid=${STEVE_UUID}&size=${size}`;\n\n  // Reset state when UUID changes\n  useEffect(() => {\n    setImgError(false);\n    setIsLoading(true);\n  }, [uuid]);\n\n  const handleLoad = useCallback(() => {\n    setIsLoading(false);\n  }, []);\n\n  const handleError = useCallback(() => {\n    setImgError(true);\n    setIsLoading(false);\n  }, []);\n\n  return (\n    <div\n      className={className}\n      style={{\n        width: size,\n        height: size,\n        position: 'relative',\n      }}\n    >\n      <img\n        src={imgError ? fallbackUrl : imageUrl}\n        alt={mcid ? `${mcid} のスキン` : 'Minecraft avatar'}\n        width={size}\n        height={size}\n        style={{\n          imageRendering: 'pixelated',\n          display: isLoading ? 'none' : 'block',\n          width: size,\n          height: size,\n        }}\n        onLoad={handleLoad}\n        onError={handleError}\n        loading={priority ? 'eager' : 'lazy'}\n        decoding=\"async\"\n      />\n      {isLoading && (\n        <div\n          style={{\n            width: size,\n            height: size,\n            backgroundColor: '#3c3c3c',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\n/**\n * Minecraft Avatar Component\n *\n * Displays a player's Minecraft avatar by fetching from the API endpoint.\n *\n * @example\n * ```tsx\n * import { MinecraftAvatar } from '@bafv4/mcavatar/react';\n *\n * <MinecraftAvatar uuid={player.uuid} mcid={player.mcid} size={64} />\n * ```\n */\nexport const MinecraftAvatar = memo(MinecraftAvatarComponent);\n","/**\n * Minecraft Avatar Constants\n */\n\nimport type { AvatarOptions, SkinRegion } from './types';\n\n/**\n * Steve's UUID for fallback\n */\nexport const STEVE_UUID = '8667ba71b85a4004af54457a9734eed7';\n\n/**\n * Mojang API endpoints\n */\nexport const MOJANG_API = {\n  SESSION_SERVER: 'https://sessionserver.mojang.com/session/minecraft/profile',\n} as const;\n\n/**\n * Skin texture dimensions\n */\nexport const SKIN_DIMENSIONS = {\n  LEGACY: { width: 64, height: 32 },\n  MODERN: { width: 64, height: 64 },\n} as const;\n\n/**\n * Head region coordinates (8x8 pixels)\n */\nexport const HEAD_REGIONS: {\n  BASE: SkinRegion;\n  OVERLAY: SkinRegion;\n} = {\n  /** Base head layer */\n  BASE: { x: 8, y: 8, width: 8, height: 8 },\n  /** Overlay/hat layer (modern skins only) */\n  OVERLAY: { x: 40, y: 8, width: 8, height: 8 },\n};\n\n/**\n * Default avatar options\n */\nexport const DEFAULT_OPTIONS: Required<AvatarOptions> = {\n  size: 64,\n  includeOverlay: true,\n  fallbackUuid: STEVE_UUID,\n};\n"],"mappings":";AAEA,SAAS,UAAU,WAAW,MAAM,mBAAmB;;;ACOhD,IAAM,aAAa;;;AD4BtB,SAQE,KARF;AA/BJ,IAAM,2BAA2B,CAAC;AAAA,EAChC;AAAA,EACA;AAAA,EACA,OAAO;AAAA,EACP,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,cAAc;AAChB,MAA4B;AAC1B,QAAM,CAAC,UAAU,WAAW,IAAI,SAAS,KAAK;AAC9C,QAAM,CAAC,WAAW,YAAY,IAAI,SAAS,IAAI;AAG/C,QAAM,WAAW,GAAG,WAAW,SAAS,IAAI,SAAS,IAAI;AACzD,QAAM,cAAc,GAAG,WAAW,SAAS,UAAU,SAAS,IAAI;AAGlE,YAAU,MAAM;AACd,gBAAY,KAAK;AACjB,iBAAa,IAAI;AAAA,EACnB,GAAG,CAAC,IAAI,CAAC;AAET,QAAM,aAAa,YAAY,MAAM;AACnC,iBAAa,KAAK;AAAA,EACpB,GAAG,CAAC,CAAC;AAEL,QAAM,cAAc,YAAY,MAAM;AACpC,gBAAY,IAAI;AAChB,iBAAa,KAAK;AAAA,EACpB,GAAG,CAAC,CAAC;AAEL,SACE;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,OAAO;AAAA,QACL,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,UAAU;AAAA,MACZ;AAAA,MAEA;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,KAAK,WAAW,cAAc;AAAA,YAC9B,KAAK,OAAO,GAAG,IAAI,8BAAU;AAAA,YAC7B,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,OAAO;AAAA,cACL,gBAAgB;AAAA,cAChB,SAAS,YAAY,SAAS;AAAA,cAC9B,OAAO;AAAA,cACP,QAAQ;AAAA,YACV;AAAA,YACA,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,SAAS,WAAW,UAAU;AAAA,YAC9B,UAAS;AAAA;AAAA,QACX;AAAA,QACC,aACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,cACL,OAAO;AAAA,cACP,QAAQ;AAAA,cACR,iBAAiB;AAAA,cACjB,UAAU;AAAA,cACV,KAAK;AAAA,cACL,MAAM;AAAA,YACR;AAAA;AAAA,QACF;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAcO,IAAM,kBAAkB,KAAK,wBAAwB;","names":[]}