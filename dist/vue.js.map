{"version":3,"sources":["../src/vue/MinecraftAvatar.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = [\"src\", \"alt\", \"width\", \"height\", \"loading\"]\n\nimport { ref, computed, watch } from 'vue';\n\nexport interface MinecraftAvatarProps {\n  /** Player UUID (required) */\n  uuid: string;\n  /** Player MCID for alt text */\n  mcid?: string;\n  /** Output size in pixels (default: 64) */\n  size?: number;\n  /** Additional CSS class */\n  className?: string;\n  /** Priority loading (for above-the-fold content) */\n  priority?: boolean;\n  /** API endpoint for avatar generation (default: '/api/avatar') */\n  apiEndpoint?: string;\n}\n\nconst STEVE_UUID = '8667ba71b85a4004af54457a9734eed7';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  props: {\n    uuid: { type: String, required: true },\n    mcid: { type: String, required: false },\n    size: { type: Number, required: false, default: 64 },\n    className: { type: String, required: false, default: '' },\n    priority: { type: Boolean, required: false, default: false },\n    apiEndpoint: { type: String, required: false, default: '/api/avatar' }\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\nconst imgError = ref(false);\nconst isLoading = ref(true);\n\nconst imageUrl = computed(\n  () => `${props.apiEndpoint}?uuid=${props.uuid}&size=${props.size}`\n);\nconst fallbackUrl = computed(\n  () => `${props.apiEndpoint}?uuid=${STEVE_UUID}&size=${props.size}`\n);\nconst altText = computed(() =>\n  props.mcid ? `${props.mcid} のスキン` : 'Minecraft avatar'\n);\n\n// Reset state when UUID changes\nwatch(\n  () => props.uuid,\n  () => {\n    imgError.value = false;\n    isLoading.value = true;\n  }\n);\n\nfunction handleLoad() {\n  isLoading.value = false;\n}\n\nfunction handleError() {\n  imgError.value = true;\n  isLoading.value = false;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass(__props.className),\n    style: _normalizeStyle({\n      width: `${__props.size}px`,\n      height: `${__props.size}px`,\n      position: 'relative',\n    })\n  }, [\n    _createElementVNode(\"img\", {\n      src: imgError.value ? fallbackUrl.value : imageUrl.value,\n      alt: altText.value,\n      width: __props.size,\n      height: __props.size,\n      style: _normalizeStyle({\n        imageRendering: 'pixelated',\n        display: isLoading.value ? 'none' : 'block',\n        width: `${__props.size}px`,\n        height: `${__props.size}px`,\n      }),\n      loading: __props.priority ? 'eager' : 'lazy',\n      decoding: \"async\",\n      onLoad: handleLoad,\n      onError: handleError\n    }, null, 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_1),\n    (isLoading.value)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          style: _normalizeStyle({\n        width: `${__props.size}px`,\n        height: `${__props.size}px`,\n        backgroundColor: '#3c3c3c',\n        position: 'absolute',\n        top: 0,\n        left: 0,\n      })\n        }, null, 4 /* STYLE */))\n      : _createCommentVNode(\"v-if\", true)\n  ], 6 /* CLASS, STYLE */))\n}\n}\n\n})"],"mappings":"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","names":[]}